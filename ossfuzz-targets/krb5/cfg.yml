krb5:
  language: "c"
  image: "fuzzdrivergpt/krb5:env"
  apiblocklist: [ "^$" ]
  precode: '#include "./com_err.h"\n#include "./kdb.h"\n#include "./krad.h"\n#include "./krb5.h"\n#include "./profile.h"\n#include "./verto-module.h"\n#include "./verto.h"\n#include "./gssapi.h"\n#include "./gssapi/gssapi.h"\n#include "./gssapi/gssapi_alloc.h"\n#include "./gssapi/gssapi_ext.h"\n#include "./gssapi/gssapi_generic.h"\n#include "./gssapi/gssapi_krb5.h"\n#include "./gssapi/mechglue.h"\n#include "./gssrpc/types.h"\n#include "./gssrpc/auth.h"\n#include "./gssrpc/auth_gss.h"\n#include "./gssrpc/auth_gssapi.h"\n#include "./gssrpc/auth_unix.h"\n#include "./gssrpc/clnt.h"\n#include "./gssrpc/netdb.h"\n#include "./gssrpc/pmap_clnt.h"\n#include "./gssrpc/pmap_prot.h"\n#include "./gssrpc/pmap_rmt.h"\n#include "./gssrpc/rename.h"\n#include "./gssrpc/rpc.h"\n#include "./gssrpc/rpc_msg.h"\n#include "./gssrpc/svc.h"\n#include "./gssrpc/svc_auth.h"\n#include "./gssrpc/xdr.h"\n#include "./kadm5/admin.h"\n#include "./kadm5/chpass_util_strings.h"\n#include "./kadm5/kadm_err.h"\n#include "./krb5/krb5.h"\n#include "./krb5/ccselect_plugin.h"\n#include "./krb5/certauth_plugin.h"\n#include "./krb5/clpreauth_plugin.h"\n#include "./krb5/hostrealm_plugin.h"\n#include "./krb5/kadm5_auth_plugin.h"\n#include "./krb5/kadm5_hook_plugin.h"\n#include "./krb5/kdcpolicy_plugin.h"\n#include "./krb5/kdcpreauth_plugin.h"\n#include "./krb5/localauth_plugin.h"\n#include "./krb5/locate_plugin.h"\n#include "./krb5/plugin.h"\n#include "./krb5/preauth_plugin.h"\n#include "./krb5/pwqual_plugin.h"\n'
  headers: { "/root/workspace/fuzzdrivergpt/install/include" : "**/*" }
  binaries: ["/root/workspace/fuzzdrivergpt/install/lib/libkrb5_test.a","/root/workspace/fuzzdrivergpt/install/lib/libgssrpc.a","/root/workspace/fuzzdrivergpt/install/lib/libkadm5srv_mit.a","/root/workspace/fuzzdrivergpt/install/lib/libkadm5clnt.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5_k5tls.a","/root/workspace/fuzzdrivergpt/install/lib/libkdb5.a","/root/workspace/fuzzdrivergpt/install/lib/libgssapi_krb5.a","/root/workspace/fuzzdrivergpt/install/lib/libkadm5clnt_mit.a","/root/workspace/fuzzdrivergpt/install/lib/libverto.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5_db2.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5support.a","/root/workspace/fuzzdrivergpt/install/lib/libk5crypto.a","/root/workspace/fuzzdrivergpt/install/lib/libkadm5srv.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5_spake.a","/root/workspace/fuzzdrivergpt/install/lib/libkrad.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5.a","/root/workspace/fuzzdrivergpt/install/lib/libcom_err.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5_otp.a","/root/workspace/fuzzdrivergpt/install/lib/libkrb5_pkinit.a" ]
  compile: [ "/usr/local/bin/clang-15", "-isystem", "/usr/local/lib/clang/15.0.0/include", "-isystem", "/usr/local/include", "-isystem", "/usr/include/x86_64-linux-gnu", "-isystem", "/usr/include", "-fsanitize=address", "-fsanitize=fuzzer","-I/root/workspace/fuzzdrivergpt/install/include", "-O1","-fno-omit-frame-pointer","-gline-tables-only","-DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION","-fsanitize-address-use-after-scope","-fsanitize=fuzzer-no-link","-DHAVE_CONFIG_H","-DKRB5_DEPRECATED=1","-DKRB5_PRIVATE","-DHAS_STDARG","-fcommon","-Wall","-Werror", "-fuse-ld=lld" ]
  build: "COMPBASE OUTFILE -o OUTEXE /root/workspace/fuzzdrivergpt/install/lib/libkrb5.a /root/workspace/fuzzdrivergpt/install/lib/libk5crypto.a /root/workspace/fuzzdrivergpt/install/lib/libcom_err.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5support.a /root/workspace/fuzzdrivergpt/install/lib/libgssrpc.a /root/workspace/fuzzdrivergpt/install/lib/libkadm5clnt.a /root/workspace/fuzzdrivergpt/install/lib/libkadm5clnt_mit.a /root/workspace/fuzzdrivergpt/install/lib/libkadm5srv.a /root/workspace/fuzzdrivergpt/install/lib/libkadm5srv_mit.a /root/workspace/fuzzdrivergpt/install/lib/libkdb5.a /root/workspace/fuzzdrivergpt/install/lib/libkrad.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_db2.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_k5tls.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_otp.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_pkinit.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_spake.a /root/workspace/fuzzdrivergpt/install/lib/libkrb5_test.a /root/workspace/fuzzdrivergpt/install/lib/libgssapi_krb5.a /root/workspace/fuzzdrivergpt/install/lib/libverto.a -lresolv"
  run: "OUTEXE -detect_leaks=0 -max_total_time=60 -timeout=30 -artifact_prefix=ARTIFACTDIR/ -close_fd_mask=3 SEEDDIR"
  known_drivers: ["/src/krb5/fuzzing/Fuzz_chpw.c","/src/krb5/fuzzing/Fuzz_krb5.c","/src/krb5/fuzzing/Fuzz_ndr.c","/src/krb5/fuzzing/Fuzz_profile.c","/src/krb5/fuzzing/Fuzz_json.c","/src/krb5/fuzzing/Fuzz_marshal.c","/src/krb5/fuzzing/Fuzz_pac.c" ]

#
#clang -O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link -DHAVE_CONFIG_H -DKRB5_DEPRECATED=1 -DKRB5_PRIVATE -DHAS_STDARG -fcommon -Wall -Werror  -I./../src/include/ -I./../src/kdc/ -I./../src/lib/krb5/ccache/ -I./../src/util/profile/ -c Fuzz_json.c
#
#clang++ -O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link -L./../src/lib/ -fcommon -o Fuzz_chpw Fuzz_chpw.o -fsanitize=fuzzer -lkrb5 -lk5crypto -lcom_err -lkrb5support -lresolv