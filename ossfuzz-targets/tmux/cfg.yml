tmux:
  language: "c"
  image: "fuzzdrivergpt/tmux:env"
  apiblocklist: [ "^$" ]
  precode: ''
  headers: { 
    "/src/tmux" : "*.h",
    "/src/tmux/compat" : "*.h" 
  }
  binaries: [ "/src/tmux/libtmux.a" ]
  compile: ['/usr/local/bin/clang-15', '-isystem', '/usr/local/lib/clang/15.0.0/include', '-isystem', '/usr/local/include', '-isystem', '/usr/include/x86_64-linux-gnu', '-isystem', '/usr/include', '-fsanitize=address', '-fsanitize=fuzzer','-I/root/workspace/fuzzdrivergpt/install/include','-DPACKAGE_NAME="tmux"','-DPACKAGE_TARNAME="tmux"','-DPACKAGE_VERSION="next-3.4"','-DPACKAGE_STRING="tmux next-3.4"','-DPACKAGE_BUGREPORT=""','-DPACKAGE_URL=""','-DPACKAGE="tmux"','-DVERSION="next-3.4"','-DNEED_FUZZING=1','-DSTDC_HEADERS=1','-DHAVE_SYS_TYPES_H=1','-DHAVE_SYS_STAT_H=1','-DHAVE_STDLIB_H=1','-DHAVE_STRING_H=1','-DHAVE_MEMORY_H=1','-DHAVE_STRINGS_H=1','-DHAVE_INTTYPES_H=1','-DHAVE_STDINT_H=1','-DHAVE_UNISTD_H=1','-D__EXTENSIONS__=1','-D_ALL_SOURCE=1','-D_GNU_SOURCE=1','-D_POSIX_PTHREAD_SEMANTICS=1','-D_TANDEM_SOURCE=1','-DHAVE_DIRENT_H=1','-DHAVE_FCNTL_H=1','-DHAVE_INTTYPES_H=1','-DHAVE_PATHS_H=1','-DHAVE_PTY_H=1','-DHAVE_STDINT_H=1','-DHAVE_SYS_DIR_H=1','-DHAVE_LIBM=1','-DHAVE_DIRFD=1','-DHAVE_FLOCK=1','-DHAVE_PRCTL=1','-DHAVE_SYSCONF=1','-DHAVE_ASPRINTF=1','-DHAVE_CFMAKERAW=1','-DHAVE_CLOCK_GETTIME=1','-DHAVE_EXPLICIT_BZERO=1','-DHAVE_GETDTABLESIZE=1','-DHAVE_GETLINE=1','-DHAVE_MEMMEM=1','-DHAVE_SETENV=1','-DHAVE_STRCASESTR=1','-DHAVE_STRNDUP=1','-DHAVE_STRSEP=1','-DHAVE_EVENT2_EVENT_H=1','-DHAVE_NCURSES_H=1','-DHAVE_B64_NTOP=1','-DHAVE_MALLOC_TRIM=1','-DHAVE_DAEMON=1','-DHAVE_FORKPTY=1','-DHAVE___PROGNAME=1','-DHAVE_PROGRAM_INVOCATION_SHORT_NAME=1','-DHAVE_PR_SET_NAME=1','-DHAVE_SO_PEERCRED=1','-DHAVE_PROC_PID=1' ,'-D_DEFAULT_SOURCE','-D_XOPEN_SOURCE=600','-I/usr/local/include','-DTMUX_CONF="/etc/tmux.conf:~/.tmux.conf:$XDG_CONFIG_HOME/tmux/tmux.conf:~/.config/tmux/tmux.conf"','-DTMUX_TERM="tmux-256color"','-O1','-fno-omit-frame-pointer','-gline-tables-only','-DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION','-fsanitize=address','-fsanitize-address-use-after-scope','-fsanitize=fuzzer-no-link','-I/src/tmux' ]
  build: "COMPBASE OUTFILE /src/tmux/libtmux.a -lutil  -l:libtinfo.a  -L/usr/local/lib -levent_core -lm  -lresolv -o OUTEXE"
  run: "OUTEXE -detect_leaks=0 -max_total_time=60 -timeout=30 -artifact_prefix=ARTIFACTDIR/ -close_fd_mask=3 SEEDDIR"
  known_drivers: [ "/src/tmux/fuzz/input-fuzzer.c" ]

#clang -DPACKAGE_NAME='tmux' -DPACKAGE_TARNAME='tmux' -DPACKAGE_VERSION='next-3.4' -DPACKAGE_STRING='tmux next-3.4' -DPACKAGE_BUGREPORT='' -DPACKAGE_URL='' -DPACKAGE='tmux' -DVERSION='next-3.4' -DNEED_FUZZING=1 -DSTDC_HEADERS=1 -DHAVE_SYS_TYPES_H=1 -DHAVE_SYS_STAT_H=1 -DHAVE_STDLIB_H=1 -DHAVE_STRING_H=1 -DHAVE_MEMORY_H=1 -DHAVE_STRINGS_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_STDINT_H=1 -DHAVE_UNISTD_H=1 -D__EXTENSIONS__=1 -D_ALL_SOURCE=1 -D_GNU_SOURCE=1 -D_POSIX_PTHREAD_SEMANTICS=1 -D_TANDEM_SOURCE=1 -DHAVE_DIRENT_H=1 -DHAVE_FCNTL_H=1 -DHAVE_INTTYPES_H=1 -DHAVE_PATHS_H=1 -DHAVE_PTY_H=1 -DHAVE_STDINT_H=1 -DHAVE_SYS_DIR_H=1 -DHAVE_LIBM=1 -DHAVE_DIRFD=1 -DHAVE_FLOCK=1 -DHAVE_PRCTL=1 -DHAVE_SYSCONF=1 -DHAVE_ASPRINTF=1 -DHAVE_CFMAKERAW=1 -DHAVE_CLOCK_GETTIME=1 -DHAVE_EXPLICIT_BZERO=1 -DHAVE_GETDTABLESIZE=1 -DHAVE_GETLINE=1 -DHAVE_MEMMEM=1 -DHAVE_SETENV=1 -DHAVE_STRCASESTR=1 -DHAVE_STRNDUP=1 -DHAVE_STRSEP=1 -DHAVE_EVENT2_EVENT_H=1 -DHAVE_NCURSES_H=1 -DHAVE_B64_NTOP=1 -DHAVE_MALLOC_TRIM=1 -DHAVE_DAEMON=1 -DHAVE_FORKPTY=1 -DHAVE___PROGNAME=1 -DHAVE_PROGRAM_INVOCATION_SHORT_NAME=1 -DHAVE_PR_SET_NAME=1 -DHAVE_SO_PEERCRED=1 -DHAVE_PROC_PID=1
#  -I.  -D_DEFAULT_SOURCE -D_XOPEN_SOURCE=600
#  -I/usr/local/include -DTMUX_VERSION='"next-3.4"' -DTMUX_CONF='"/etc/tmux.conf:~/.tmux.conf:$XDG_CONFIG_HOME/tmux/tmux.conf:~/.config/tmux/tmux.conf"' -DTMUX_TERM='"tmux-256color"'      -O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link -MT fuzz/input-fuzzer.o -MD -MP -MF $depbase.Tpo -c -o fuzz/input-fuzzer.o fuzz/input-fuzzer.c
#
#clang   -O1 -fno-omit-frame-pointer -gline-tables-only -DFUZZING_BUILD_MODE_UNSAFE_FOR_PRODUCTION -fsanitize=address -fsanitize-address-use-after-scope -fsanitize=fuzzer-no-link -fsanitize=fuzzer -lc++  -o fuzz/input-fuzzer fuzz/input-fuzzer.o
#compat/closefrom.o compat/fgetln.o compat/freezero.o compat/getdtablecount.o compat/getpeereid.o compat/getprogname.o compat/setproctitle.o compat/strlcat.o compat/strlcpy.o compat/strtonum.o compat/reallocarray.o compat/recallocarray.o compat/getopt.o compat/imsg.o compat/imsg-buffer.o compat/vis.o compat/unvis.o compat/fdforkpty.o alerts.o arguments.o attributes.o cfg.o client.o cmd-attach-session.o cmd-bind-key.o cmd-break-pane.o cmd-capture-pane.o cmd-choose-tree.o cmd-command-prompt.o cmd-confirm-before.o cmd-copy-mode.o cmd-detach-client.o cmd-display-menu.o cmd-display-message.o cmd-display-panes.o cmd-find-window.o cmd-find.o cmd-if-shell.o cmd-join-pane.o cmd-kill-pane.o cmd-kill-server.o cmd-kill-session.o cmd-kill-window.o cmd-list-buffers.o cmd-list-clients.o cmd-list-keys.o cmd-list-panes.o cmd-list-sessions.o cmd-list-windows.o cmd-load-buffer.o cmd-lock-server.o cmd-move-window.o cmd-new-session.o cmd-new-window.o cmd-parse.o cmd-paste-buffer.o cmd-pipe-pane.o cmd-queue.o cmd-refresh-client.o cmd-rename-session.o cmd-rename-window.o cmd-resize-pane.o cmd-resize-window.o cmd-respawn-pane.o cmd-respawn-window.o cmd-rotate-window.o cmd-run-shell.o cmd-save-buffer.o cmd-select-layout.o cmd-select-pane.o cmd-select-window.o cmd-send-keys.o cmd-server-access.o cmd-set-buffer.o cmd-set-environment.o cmd-set-option.o cmd-show-environment.o cmd-show-messages.o cmd-show-options.o cmd-show-prompt-history.o cmd-source-file.o cmd-split-window.o cmd-swap-pane.o cmd-swap-window.o cmd-switch-client.o cmd-unbind-key.o cmd-wait-for.o cmd.o colour.o control-notify.o control.o environ.o file.o format.o format-draw.o grid-reader.o grid-view.o grid.o hyperlinks.o input-keys.o input.o job.o key-bindings.o key-string.o layout-custom.o layout-set.o layout.o log.o menu.o mode-tree.o names.o notify.o options-table.o options.o paste.o popup.o proc.o regsub.o resize.o screen-redraw.o screen-write.o screen.o server-acl.o server-client.o server-fn.o server.o session.o spawn.o status.o style.o tmux.o tty-acs.o tty-features.o tty-keys.o tty-term.o tty.o utf8.o window-buffer.o window-client.o window-clock.o window-copy.o window-customize.o window-tree.o window.o xmalloc.o osdep-linux.o
#-lutil  -l:libtinfo.a  -L/usr/local/lib -levent_core -lm  -lresolv